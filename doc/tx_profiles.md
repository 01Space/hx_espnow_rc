# Modes and profiles 

Module can work in multiple modes. Mode is configured in profile. Profile is selected depension on CH16 value from RC Controller. Configure CH16 mixer to output constant value in OpenTX (use MAX with Weight 0 and adjust Offset).

For example:

- 1000...1100 ( or -100%) - profile 1
- 1100...1200 ( or -80%) - profile 2
- 1200...1300 ( or -60%) - profile 3
- 1300...1400 ( or -40%) - profile 4

In future, it will be possible to configure profiles.

Current implementation contains 4 hardcoded profiles:

- hx_espnow_rc
- hx_espnow_rc in LR mode
- Xiro Xplorer Mini quadcopter  https://github.com/RomanLut/hx_espnow_rc/blob/main/doc/xiromini/xiromini.md
- BLE gamepad

# Profile 1: hx_espnow_rc 

Profile to be used with:
- standalone Servo/PWM output receiver: https://github.com/RomanLut/hx_espnow_rc/blob/main/doc/d1_mini_rx_standalone.md
- ESP-01 based SBUS receiver: https://github.com/RomanLut/hx_espnow_rc/blob/main/doc/esp01_sbus.md
- ESP32 based SBUS receiver: https://github.com/RomanLut/hx_espnow_rc/blob/main/doc/esp32_sbus.md

Packet rate is 50Hz. 

Telemetry stream is transparent, output to bluetooth, bidirectional, ~57kBit. Suitable for Mavlink, LTE, CRSF.

Module outputs SPORT telemetry to transmitter. In future it will be possible to translate MAvlink/CRSF to SPORT. Currelty it is not implemented.

Additionally, the following Smartport telemetry is generated by transmitter in hx_espnow_rc profile:

**RSSI** - 0..100. Computed link quality. Shows how many packets are acknowledged by Slave on Master. 

**TRSS** - received signal strength in Dbm. Shows how well Master hears Slave ( telemetry from slave ).

**5250** - **NOIS** - Noise floor in Dbm, sensed by Master.

**5251** - **SNR** - Signal to noise ratio in Db, sensed by Master.

**5252** - **RXSI** 0..100. Computed link quality. Shows how many packets are acknowledged by Master on Slave.

**5253** - **RXSS**[^note1] - Received signal strength in Dbm on Slave. Shows how well Slave hears Master ( control packets and upcoming telemetry from Master ).

**5254** - **RXNF**[^note1] - Noise floor in Dbm, sensed by Slave.

**5255** - **RXSN**[^note1] -  Signal to noise ratio in Db, sensed by Slave.

**R9PW** - TX power in mW

**5256** - Current profile id

**5260** - **CycT** Debug: Cycle time in ms

**5261** - **Rate** Debug: Wifi rate

**5262** - **PktR** Debug: Successfull packet rate from Master to Slave, packets/second.

**A1** - Value passed from Slave, if any.

**A2** - Value passed from Slave, if any.

[^note1]: **RXSS**, **RXNF** and **RXSN** are available only if receiver is based on ESP32. These values are 0, if receiver is based on ESP8266. 


# Profile 2: hx_espnow_rc in LR mode

Profile to be used with:
- ESP32 based SBUS receiver: https://github.com/RomanLut/hx_espnow_rc/blob/main/doc/esp32_sbus.md

Note that receiver should be flashed with LR mode enabled ( USE_LR_MODE true ).

Packet rate is 40Hz. 

Other parameters are similar to hx_espnow_rc profile.

# Profile 3: xiro_mini pofile

Profile to be used with Xiro Mini quadcopter: https://github.com/RomanLut/hx_espnow_rc/blob/main/doc/xiromini/xiromini.md

# Profile 4: BLE gamepad

Profile emulates BLE gamepad HXRCBLE. Can be used with PC or Android.

Channels 1..6 are output as X,Y,Z,RX,RX,RZ axes of gamepad. You are free to confugure actual mapping in OpenTX.

Channels 7..15 are mapped to gamepad buttons 1-9 (<1750 - unpressed, >= 1750 - pressed).

CH16 is used to select this profile (should be 1300)


TODO: configuration in XML, web page for configuration.